<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<meta name ="format-detection" content="telephone=no">
	<title>Document</title>
	<script src="http://apps.bdimg.com/libs/jquery/1.10.1/jquery.min.js"></script>
</head>
<body>
	<a href="javascript:void(0) " class="downloadApp">点击下载</a>
	<script>
		//获取url 参数 
		function getParameter(paraName) {
		  var sUrl = location.href;
		  var reg = "(?:\\?|&){1}" + paraName + "=([^&]*)"
		  var regresult = new RegExp(reg, "gi");
		  regresult.exec(sUrl);
		  return RegExp.$1;
		}

		var activityId = getParameter('activityId'); // 根据url获取id参数 

		$(function(){
			//	点击下载
			var u = navigator.userAgent;
			var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
			var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端	
			// 参与
			$(".downloadApp").click(function() {
				var timeout, t = 1000,
					hasApp = true; // 有app
				setTimeout(function() {
					if (isAndroid) {
						if (/MicroMessenger/i.test(navigator.userAgent)) {
							location.href = "tips.html"; // "tips.html?activityId=" + activityId;如有需要需传参
						} else {
							if (!hasApp) {
								window.location.href = "http://t.cn/RGpppXd";
							}
						}
					}
					if (isiOS) {
						if (/MicroMessenger/i.test(navigator.userAgent)) {
							location.href = "tips.html" ; // "tips.html?activityId=" + activityId;如有需要需传参
						} else {
							if (!hasApp) {
								window.location.href = "https://itunes.apple.com/cn/app/1hao-she-qu/id911696139?mt=8";  
							}
						}
					}
				}, 2000)
				var t1 = Date.now();
				if (isAndroid)  {
					window.location.href = "com.yihaoshequ://life.activitylist?type=activitylist"; ***打开app的协议，有安卓同事提供***
				}
				if (isiOS) {
					document.location = "com.yihaoshequ://life.activitylist";
				}
				timeout = setTimeout(function() {
					var t2 = Date.now();
					if (!t1 || t2 - t1 < t + 100) {
						hasApp = false;
					}
				}, t);
			})
			
		})
	</script>
</body>
</html>